<ControlTheme xmlns="https://github.com/avaloniaui"
              xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
              xmlns:atom="https://atomui.net"
              xmlns:themes="using:AtomUI.Controls.Themes"
              TargetType="atom:DialogHost"
              x:Class="AtomUI.Controls.Themes.DialogHostTheme"
              x:ClassModifier="internal">
    <ControlTheme.BasedOn>
        <themes:WindowTheme TargetType="atom:DialogHost" />
    </ControlTheme.BasedOn>
    <Setter Property="Template">
        <ControlTemplate TargetType="atom:DialogHost">
            <Panel>
                <Border Name="WindowFrame"
                        Background="{TemplateBinding Background}"
                        CornerRadius="{TemplateBinding CornerRadius}"
                        BackgroundSizing="InnerBorderEdge" />
                <Border Name="BodyFrame"
                        CornerRadius="{TemplateBinding CornerRadius}"
                        ClipToBounds="True">
                    <atom:VisualLayerManager Padding="{TemplateBinding OffScreenMargin, Mode=OneWay}">
                        <DockPanel LastChildFill="True" Name="{x:Static atom:WindowThemeConstants.ContentLayoutPart}">
                            <Border Padding="{TemplateBinding TitleBarOSOffsetMargin}" DockPanel.Dock="Top">
                                <atom:TitleBar Name="{x:Static atom:WindowThemeConstants.TitleBarPart}"
                                               Content="{TemplateBinding Title}"
                                               Logo="{TemplateBinding Logo}" />
                            </Border>

                            <DockPanel LastChildFill="True">
                                <Border Name="FooterFrame" DockPanel.Dock="Bottom"
                                        IsVisible="{TemplateBinding IsEffectiveFooterVisible}">
                                    <atom:DialogButtonBox Name="{x:Static atom:DialogThemeConstants.ButtonBoxPart}"
                                                          IsMotionEnabled="{TemplateBinding IsMotionEnabled}"
                                                          StandardButtons="{TemplateBinding StandardButtons}"
                                                          DefaultStandardButton="{TemplateBinding DefaultStandardButton}"
                                                          EscapeStandardButton="{TemplateBinding EscapeStandardButton}" />
                                </Border>
                                <Border Name="ContentFrame"
                                        CornerRadius="{TemplateBinding CornerRadius}"
                                        ClipToBounds="True"
                                        Cursor="Arrow"
                                        Padding="{TemplateBinding Padding}">
                                    <ContentPresenter
                                        Name="{x:Static atom:WindowThemeConstants.ContentPresenterPart}"
                                        ContentTemplate="{TemplateBinding ContentTemplate}"
                                        Content="{TemplateBinding Content}"
                                        HorizontalContentAlignment="{TemplateBinding HorizontalContentAlignment}"
                                        VerticalContentAlignment="{TemplateBinding VerticalContentAlignment}" />
                                </Border>
                            </DockPanel>

                        </DockPanel>
                    </atom:VisualLayerManager>
                </Border>
                <atom:WindowResizer Name="{x:Static atom:WindowThemeConstants.WindowResizerPart}"
                                    IsVisible="{Binding $parent[atom:Window].IsCustomResizerVisible}" />
            </Panel>

        </ControlTemplate>
    </Setter>

    <Style Selector="^:is(atom|DialogHost)">
        <Setter Property="Padding" Value="{DynamicResource {x:Static atom:DialogTokenKey.ContentPadding}}" />
        <Setter Property="SizeToContent" Value="WidthAndHeight" />
        <Setter Property="IsFullScreenCaptionButtonEnabled" Value="False" />

        <Style Selector="^ /template/ DockPanel#PART_ContentLayout">
            <Setter Property="VerticalSpacing"
                    Value="{DynamicResource {x:Static atom:SharedTokenKey.UniformlyMarginXS}}" />
        </Style>

        <Style Selector="^ /template/ Border#FooterFrame">
            <Setter Property="Background" Value="{DynamicResource {x:Static atom:DialogTokenKey.FooterBg}}" />
            <Setter Property="Margin" Value="{DynamicResource {x:Static atom:DialogTokenKey.FooterMarginTop}}" />
            <Setter Property="Padding" Value="{DynamicResource {x:Static atom:DialogTokenKey.FooterPadding}}" />
        </Style>

    </Style>

</ControlTheme>