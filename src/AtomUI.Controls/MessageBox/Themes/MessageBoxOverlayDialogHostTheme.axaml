<ResourceDictionary
    xmlns="https://github.com/avaloniaui"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:atom="https://atomui.net"
    xmlns:themes="using:AtomUI.Controls.Themes"
    x:ClassModifier="internal">
    <ControlTheme x:Key="{x:Type atom:MessageBoxOverlayDialogHost}" TargetType="atom:MessageBoxOverlayDialogHost">
        <ControlTheme.BasedOn>
            <themes:OverlayDialogHostTheme TargetType="atom:MessageBoxOverlayDialogHost" />
        </ControlTheme.BasedOn>

        <Setter Property="Template">
            <ControlTemplate TargetType="atom:MessageBoxOverlayDialogHost">
                <Panel>
                    <Border Name="ShadowFrame" CornerRadius="{TemplateBinding CornerRadius}" />
                    <Border Name="Frame" CornerRadius="{TemplateBinding CornerRadius}" ClipToBounds="True">
                        <DockPanel Name="RootLayout" LastChildFill="True">
                            <atom:OverlayDialogHeader Name="{x:Static atom:OverlayDialogThemeConstants.HeaderPart}"
                                                      DockPanel.Dock="Top"
                                                      Title="{TemplateBinding Title}"
                                                      Logo="{TemplateBinding TitleIcon}"
                                                      IsCloseButtonEnabled="{TemplateBinding IsClosable}"
                                                      IsMaximizeButtonEnabled="{TemplateBinding IsMaximizable}"
                                                      IsMotionEnabled="{TemplateBinding IsMotionEnabled}" />
                            <Border Name="FooterFrame" DockPanel.Dock="Bottom"
                                    IsVisible="{TemplateBinding IsEffectiveFooterVisible}">
                                <atom:DialogButtonBox Name="{x:Static atom:DialogThemeConstants.ButtonBoxPart}"
                                                      IsMotionEnabled="{TemplateBinding IsMotionEnabled}"
                                                      StandardButtons="{TemplateBinding StandardButtons}"
                                                      DefaultStandardButton="{TemplateBinding DefaultStandardButton}" />
                            </Border>
                            <Border Name="ContentFrame">
                                <DockPanel LastChildFill="True"
                                           HorizontalSpacing="{DynamicResource {x:Static atom:SharedTokenKey.SpacingSM}}">
                                    <atom:IconPresenter Name="StyleIconPresenter"
                                                        Icon="{TemplateBinding StyleIcon}"
                                                        VerticalAlignment="Top"
                                                        IsVisible="{TemplateBinding StyleIcon, Converter={x:Static ObjectConverters.IsNotNull}}" />
                                    <ContentPresenter Name="ContentPresenter"
                                                      Content="{TemplateBinding Content}"
                                                      ContentTemplate="{TemplateBinding ContentTemplate}"
                                                      HorizontalContentAlignment="Stretch"
                                                      VerticalContentAlignment="Stretch"
                                                      ClipToBounds="True" />
                                </DockPanel>
                            </Border>
                        </DockPanel>
                    </Border>
                    <atom:OverlayDialogResizer Name="{x:Static atom:OverlayDialogThemeConstants.ResizerPart}">

                        <atom:OverlayDialogResizer.IsVisible>
                            <MultiBinding
                                Converter="{x:Static atom:OverlayDialogHostTheme.OverlayDialogResizerVisibleConverter}">
                                <Binding RelativeSource="{RelativeSource TemplatedParent}"
                                         Path="IsResizable" />
                                <Binding RelativeSource="{RelativeSource TemplatedParent}" Path="WindowState" />
                            </MultiBinding>
                        </atom:OverlayDialogResizer.IsVisible>
                    </atom:OverlayDialogResizer>
                </Panel>

            </ControlTemplate>
        </Setter>
        
        <Style Selector="^ /template/ atom|IconPresenter#StyleIconPresenter">
            <Setter Property="IconWidth" Value="{DynamicResource {x:Static atom:MessageBoxTokenKey.StyleIconSize}}" />
            <Setter Property="IconHeight" Value="{DynamicResource {x:Static atom:MessageBoxTokenKey.StyleIconSize}}" />
        </Style>

        <Style Selector="^[Style=Information]">
            <Style Selector="^ /template/ atom|IconPresenter#StyleIconPresenter">
                <Setter Property="NormalFilledBrush" Value="{DynamicResource {x:Static atom:SharedTokenKey.ColorInfo}}" />
            </Style>
        </Style>
        
        <Style Selector="^[Style=Success]">
            <Style Selector="^ /template/ atom|IconPresenter#StyleIconPresenter">
                <Setter Property="NormalFilledBrush" Value="{DynamicResource {x:Static atom:SharedTokenKey.ColorSuccess}}" />
            </Style>
        </Style>
        
        <Style Selector="^[Style=Error]">
            <Style Selector="^ /template/ atom|IconPresenter#StyleIconPresenter">
                <Setter Property="NormalFilledBrush" Value="{DynamicResource {x:Static atom:SharedTokenKey.ColorError}}" />
            </Style>
        </Style>
        
        <Style Selector="^[Style=Warning]">
            <Style Selector="^ /template/ atom|IconPresenter#StyleIconPresenter">
                <Setter Property="NormalFilledBrush" Value="{DynamicResource {x:Static atom:SharedTokenKey.ColorWarning}}" />
            </Style>
        </Style>
    </ControlTheme>
</ResourceDictionary>