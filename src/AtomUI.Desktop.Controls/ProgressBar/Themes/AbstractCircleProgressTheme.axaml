<ControlTheme xmlns="https://github.com/avaloniaui"
              xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
              xmlns:atom="https://atomui.net"
              xmlns:themes="using:AtomUI.Desktop.Controls.Themes"
              x:Class="AtomUI.Desktop.Controls.Themes.AbstractCircleProgressTheme"
              TargetType="atom:AbstractCircleProgress"
              x:ClassModifier="internal">
    <ControlTheme.BasedOn>
        <themes:AbstractProgressBarTheme TargetType="atom:AbstractCircleProgress" />
    </ControlTheme.BasedOn>

    <Setter Property="Template">
        <ControlTemplate TargetType="atom:AbstractCircleProgress">
            <Canvas>
                <LayoutTransformControl Name="{x:Static atom:ProgressBarThemeConstants.LayoutTransformControlPart}">
                    <Label Name="{x:Static atom:ProgressBarThemeConstants.PercentageLabelPart}"
                           Padding="0"
                           Margin="0"
                           VerticalContentAlignment="Center"
                           HorizontalContentAlignment="Center"
                           HorizontalAlignment="Center"
                           VerticalAlignment="Center"
                           IsEnabled="{TemplateBinding IsEnabled}" 
                           IsVisible="{TemplateBinding PercentLabelVisible}"/>
                </LayoutTransformControl>
                
                <atom:IconPresenter
                    Name="{x:Static atom:ProgressBarThemeConstants.ExceptionCompletedIconPresenterPart}"
                    Icon="{TemplateBinding ExceptionCompletedIcon}"
                    HorizontalAlignment="Center"
                    VerticalAlignment="Center"/>
                <atom:IconPresenter
                    Name="{x:Static atom:ProgressBarThemeConstants.SuccessCompletedIconPresenterPart}"
                    Icon="{TemplateBinding SuccessCompletedIcon}"
                    HorizontalAlignment="Center"
                    VerticalAlignment="Center"/>
            </Canvas>
        </ControlTemplate>
    </Setter>

    <Style Selector="^:is(atom|AbstractCircleProgress)">
        <Setter Property="CircleMinimumTextFontSize"
                Value="{DynamicResource {x:Static atom:ProgressBarTokenKey.CircleMinimumTextFontSize}}" />
        <Setter Property="CircleMinimumIconSize"
                Value="{DynamicResource {x:Static atom:ProgressBarTokenKey.CircleMinimumIconSize}}" />

        <Style Selector="^ /template/ atom|IconPresenter#PART_ExceptionCompletedIconPresenter">
            <Setter Property="Foreground" Value="{DynamicResource {x:Static atom:SharedTokenKey.ColorError}}" />
        </Style>

        <Style Selector="^ /template/ atom|IconPresenter#PART_SuccessCompletedIconPresenter">
            <Setter Property="Foreground" Value="{DynamicResource {x:Static atom:SharedTokenKey.ColorSuccess}}" />
        </Style>
        
        <Style Selector="^ /template/ atom|IconPresenter:disabled">
            <Setter Property="Foreground"
                    Value="{DynamicResource {x:Static atom:SharedTokenKey.ControlItemBgActiveDisabled}}" />
        </Style>

    </Style>
</ControlTheme>