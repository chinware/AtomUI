<ResourceDictionary
    xmlns="https://github.com/avaloniaui"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:converters="using:AtomUI.Controls.Converters"
    x:ClassModifier="internal"
    xmlns:atom="https://atomui.net"
    xmlns:dataGridLocalization="clr-namespace:AtomUI.Controls.DataGridLocalization">
    <converters:DataGridHeaderCornerRadiusConverter x:Key="DataGridHeaderCornerRadiusConverter" />
    <converters:DataGridUniformBorderThicknessToScalarConverter x:Key="DataGridUniformBorderThicknessToScalarConverter" />
    <converters:DataGridPaginationVisibilityConvertor x:Key="TopPaginationVisibilityConvertor" IsTop="True" />
    <converters:DataGridPaginationVisibilityConvertor x:Key="BottomPaginationVisibilityConvertor" IsTop="False" />
    <ControlTheme x:Key="{x:Type atom:DataGrid}" TargetType="atom:DataGrid">
        <Setter Property="Template">
            <ControlTemplate>
                <Border Name="Frame"
                        BorderThickness="{TemplateBinding FrameBorderThickness}"
                        CornerRadius="{TemplateBinding CornerRadius, Converter={StaticResource DataGridHeaderCornerRadiusConverter}}"
                        ClipToBounds="True">
                    <atom:Spin IsSpinning="{TemplateBinding IsOperating}"
                               IsShowTip="True"
                               Tip="{TemplateBinding OperatingMsg}"
                               CustomIndicator="{TemplateBinding CustomOperatingIndicator}"
                               CustomIndicatorTemplate="{TemplateBinding CustomOperatingIndicatorTemplate}">
                        <DockPanel LastChildFill="True">
                            <atom:Pagination DockPanel.Dock="Top"
                                             Name="{x:Static atom:DataGridThemeConstants.TopPaginationPart}"
                                             Margin="{DynamicResource {x:Static atom:DataGridTokenKey.PaginationMargin}}"
                                             Align="{TemplateBinding TopPaginationAlign}"
                                             IsHideOnSinglePage="{TemplateBinding IsHideOnSinglePage}"
                                             IsEnabled="{TemplateBinding IsEnabled}"
                                             SizeType="{TemplateBinding SizeType}"
                                             IsMotionEnabled="{TemplateBinding IsMotionEnabled}"
                                             IsVisible="{TemplateBinding PaginationVisibility, Converter={StaticResource TopPaginationVisibilityConvertor}}" />
                            <ContentPresenter Name="Title"
                                              Content="{TemplateBinding Title}"
                                              ContentTemplate="{TemplateBinding TitleTemplate}"
                                              IsVisible="{TemplateBinding Title, Converter={x:Static ObjectConverters.IsNotNull}}"
                                              DockPanel.Dock="Top" />
                            <atom:Pagination DockPanel.Dock="Bottom"
                                             Name="{x:Static atom:DataGridThemeConstants.BottomPaginationPart}"
                                             Margin="{DynamicResource {x:Static atom:DataGridTokenKey.PaginationMargin}}"
                                             Align="{TemplateBinding BottomPaginationAlign}"
                                             IsHideOnSinglePage="{TemplateBinding IsHideOnSinglePage}"
                                             IsEnabled="{TemplateBinding IsEnabled}"
                                             SizeType="{TemplateBinding SizeType}"
                                             IsMotionEnabled="{TemplateBinding IsMotionEnabled}"
                                             IsVisible="{TemplateBinding PaginationVisibility, Converter={StaticResource BottomPaginationVisibilityConvertor}}" />
                            <ContentPresenter Name="Footer"
                                              Content="{TemplateBinding Footer}"
                                              ContentTemplate="{TemplateBinding FooterTemplate}"
                                              IsVisible="{TemplateBinding Footer, Converter={x:Static ObjectConverters.IsNotNull}}"
                                              DockPanel.Dock="Bottom" />

                            <Grid
                                RowDefinitions="Auto, *, Auto, Auto"
                                ColumnDefinitions="Auto, *, Auto"
                                ClipToBounds="True">

                                <atom:DataGridTopLeftColumnHeader
                                    Name="{x:Static atom:DataGridThemeConstants.TopLeftCornerPart}"
                                    Grid.Row="0"
                                    Grid.Column="0" />

                                <Border Name="ColumnHeadersPresenterFrame"
                                        Grid.Row="0"
                                        Grid.Column="1"
                                        Grid.ColumnSpan="2"
                                        ClipToBounds="True"
                                        CornerRadius="{TemplateBinding HeaderCornerRadius}">
                                    <Panel>
                                        <atom:DataGridColumnHeadersPresenter
                                            Name="{x:Static atom:DataGridThemeConstants.ColumnHeadersPresenterPart}"
                                            IsVisible="{TemplateBinding IsGroupHeaderMode, Converter={x:Static BoolConverters.Not}}" />
                                        <atom:DataGridGroupColumnHeadersPresenter
                                            Name="{x:Static atom:DataGridThemeConstants.GroupColumnHeadersPresenterPart}"
                                            IsVisible="{TemplateBinding IsGroupHeaderMode}" />
                                    </Panel>

                                </Border>
                                <Rectangle
                                    Name="ColumnHeadersAndRowsSeparator"
                                    VerticalAlignment="Bottom"
                                    Grid.Row="0"
                                    Grid.Column="0"
                                    Grid.ColumnSpan="3"
                                    Height="{TemplateBinding BorderThickness, Converter={StaticResource DataGridUniformBorderThicknessToScalarConverter}}" />

                                <atom:DataGridRowsPresenter
                                    Name="{x:Static atom:DataGridThemeConstants.RowsPresenterPart}"
                                    Grid.Row="1"
                                    Grid.Column="0"
                                    Grid.RowSpan="2"
                                    Grid.ColumnSpan="3"
                                    ScrollViewer.IsScrollInertiaEnabled="{TemplateBinding IsScrollInertiaEnabled}"
                                    IsVisible="{TemplateBinding IsEmptyDataSource, Converter={x:Static BoolConverters.Not}}">
                                    <atom:DataGridRowsPresenter.GestureRecognizers>
                                        <ScrollGestureRecognizer
                                            CanHorizontallyScroll="True"
                                            CanVerticallyScroll="True"
                                            IsScrollInertiaEnabled="{Binding (ScrollViewer.IsScrollInertiaEnabled), ElementName=PART_RowPresenter}" />
                                    </atom:DataGridRowsPresenter.GestureRecognizers>
                                </atom:DataGridRowsPresenter>

                                <ContentPresenter
                                    Name="EmptyIndicator"
                                    Grid.Row="1"
                                    Grid.Column="0"
                                    Grid.RowSpan="2"
                                    Grid.ColumnSpan="3"
                                    HorizontalContentAlignment="Center"
                                    VerticalContentAlignment="Center"
                                    IsVisible="{TemplateBinding IsEmptyDataSource}"
                                    Content="{TemplateBinding EmptyIndicator}"
                                    ContentTemplate="{TemplateBinding EmptyIndicatorTemplate}" />

                                <Rectangle
                                    Name="{x:Static atom:DataGridThemeConstants.BottomRightCornerPart}"
                                    Grid.Row="2"
                                    Grid.Column="2" />

                                <ScrollBar
                                    Name="{x:Static atom:DataGridThemeConstants.VerticalScrollbarPart}"
                                    Grid.Row="1"
                                    Grid.Column="2"
                                    Orientation="Vertical" />

                                <ScrollBar
                                    Grid.Row="2"
                                    Grid.Column="1"
                                    Name="{x:Static atom:DataGridThemeConstants.HorizontalScrollbarPart}"
                                    Orientation="Horizontal" />

                                <Border Name="DisabledVisualElement"
                                        Grid.Row="0"
                                        Grid.Column="0"
                                        Grid.RowSpan="4"
                                        Grid.ColumnSpan="3"
                                        IsHitTestVisible="False"
                                        HorizontalAlignment="Stretch"
                                        VerticalAlignment="Stretch"
                                        CornerRadius="{TemplateBinding HeaderCornerRadius}"
                                        IsEnabled="{TemplateBinding IsEnabled}" />

                                <atom:DataGridColumnDraggingOverIndicator
                                    Name="{x:Static atom:DataGridThemeConstants.DraggingOverIndicatorPart}"
                                    Grid.Row="1"
                                    Grid.Column="0"
                                    Grid.RowSpan="2"
                                    Grid.ColumnSpan="3"
                                    IsVisible="False" />
                            </Grid>

                        </DockPanel>
                    </atom:Spin>
                </Border>
            </ControlTemplate>
        </Setter>

        <Setter Property="HeadersVisibility" Value="Column" />
        <Setter Property="HorizontalScrollBarVisibility" Value="Auto" />
        <Setter Property="VerticalScrollBarVisibility" Value="Auto" />
        <Setter Property="SelectionMode" Value="None" />
        <Setter Property="FocusAdorner" Value="{x:Null}" />
        <Setter Property="CornerRadius" Value="{DynamicResource {x:Static atom:DataGridTokenKey.TableRadius}}" />
        <Setter Property="IsMotionEnabled" Value="{DynamicResource {x:Static atom:SharedTokenKey.EnableMotion}}" />
        <Setter Property="OperatingMsg"
                Value="{DynamicResource {x:Static dataGridLocalization:DataGridLangResourceKey.Operating}}" />

        <Style Selector="^ /template/ Border#ColumnHeadersPresenterFrame">
            <Setter Property="Background" Value="{DynamicResource {x:Static atom:DataGridTokenKey.TableHeaderBg}}" />
        </Style>

        <Style Selector="^ /template/ Rectangle#ColumnHeadersAndRowsSeparator">
            <Setter Property="Fill" Value="{DynamicResource {x:Static atom:DataGridTokenKey.TableBorderColor}}" />
        </Style>

        <Style Selector="^ /template/ Border#Frame">
            <Setter Property="BorderBrush" Value="{DynamicResource {x:Static atom:DataGridTokenKey.TableBorderColor}}" />
        </Style>

        <Style Selector="^ /template/ ContentPresenter#Footer">
            <Setter Property="Foreground"
                    Value="{DynamicResource {x:Static atom:DataGridTokenKey.TableFooterTextColor}}" />
            <Setter Property="Background" Value="{DynamicResource {x:Static atom:DataGridTokenKey.TableFooterBg}}" />
        </Style>

        <Style Selector="^ /template/ ContentPresenter#EmptyIndicator">
            <Setter Property="Padding"
                    Value="{DynamicResource {x:Static atom:SharedTokenKey.PaddingXL}}" />
        </Style>

        <Style Selector="^[SizeType=Large]">
            <Style Selector="^ /template/ ContentPresenter#Title">
                <Setter Property="Padding" Value="{DynamicResource {x:Static atom:DataGridTokenKey.TablePadding}}" />
                <Setter Property="FontSize" Value="{DynamicResource {x:Static atom:DataGridTokenKey.TableFontSize}}" />
            </Style>
            <Style Selector="^ /template/ ContentPresenter#Footer">
                <Setter Property="Padding" Value="{DynamicResource {x:Static atom:DataGridTokenKey.TablePadding}}" />
                <Setter Property="FontSize" Value="{DynamicResource {x:Static atom:DataGridTokenKey.TableFontSize}}" />
            </Style>
        </Style>
        <Style Selector="^[SizeType=Middle]">
            <Style Selector="^ /template/ ContentPresenter#Title">
                <Setter Property="Padding"
                        Value="{DynamicResource {x:Static atom:DataGridTokenKey.TablePaddingMiddle}}" />
                <Setter Property="FontSize"
                        Value="{DynamicResource {x:Static atom:DataGridTokenKey.TableFontSizeMiddle}}" />
            </Style>
            <Style Selector="^ /template/ ContentPresenter#Footer">
                <Setter Property="Padding"
                        Value="{DynamicResource {x:Static atom:DataGridTokenKey.TablePaddingMiddle}}" />
                <Setter Property="FontSize"
                        Value="{DynamicResource {x:Static atom:DataGridTokenKey.TableFontSizeMiddle}}" />
            </Style>
        </Style>
        <Style Selector="^[SizeType=Small]">
            <Style Selector="^ /template/ ContentPresenter#Title">
                <Setter Property="Padding" Value="{DynamicResource {x:Static atom:DataGridTokenKey.TablePaddingSmall}}" />
                <Setter Property="FontSize"
                        Value="{DynamicResource {x:Static atom:DataGridTokenKey.TableFontSizeSmall}}" />
            </Style>
            <Style Selector="^ /template/ ContentPresenter#Footer">
                <Setter Property="Padding"
                        Value="{DynamicResource {x:Static atom:DataGridTokenKey.TablePaddingSmall}}" />
                <Setter Property="FontSize"
                        Value="{DynamicResource {x:Static atom:DataGridTokenKey.TableFontSizeSmall}}" />
            </Style>
        </Style>

    </ControlTheme>
</ResourceDictionary>