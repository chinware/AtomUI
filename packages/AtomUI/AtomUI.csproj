<Project Sdk="Microsoft.NET.Sdk">
    
    <Import Project="$(MSBuildThisFileDirectory)../../build/AtomUINativePackageInfo.props"/>

    <PropertyGroup>
        <TargetFrameworks>$(AtomUIDevelopTargetFramework);$(AtomUIProductionTargetFramework)</TargetFrameworks>
        <ImplicitUsings>enable</ImplicitUsings>
        <Nullable>enable</Nullable>
        <RootNamespace>AtomUI</RootNamespace>
        <IncludeBuildOutput>true</IncludeBuildOutput>
    </PropertyGroup>

    <ItemGroup>
        <PackageReference Include="Avalonia"/>
        <PackageReference Include="Avalonia.Svg"/>
        <PackageReference Include="System.Reactive"/>
    </ItemGroup>

    <PropertyGroup Condition=" '$(Configuration)' == 'Debug' ">
        <IncludeAssets>all</IncludeAssets>
    </PropertyGroup>
    <PropertyGroup Condition=" '$(Configuration)' == 'Release' ">
        <IncludeAssets>none</IncludeAssets>
    </PropertyGroup>
    <ItemGroup>
        <ProjectReference Include="$(MSBuildThisFileDirectory)/../../src/AtomUI.Base/AtomUI.Base.csproj">
            <IncludeAssets>$(IncludeAssets)</IncludeAssets>
        </ProjectReference>
        <ProjectReference Include="$(MSBuildThisFileDirectory)/../../src/AtomUI.Generator/AtomUI.Generator.csproj">
            <IncludeAssets>$(IncludeAssets)</IncludeAssets>
        </ProjectReference>
        <ProjectReference Include="$(MSBuildThisFileDirectory)/../../src/AtomUI.Controls/AtomUI.Controls.csproj">
            <IncludeAssets>$(IncludeAssets)</IncludeAssets>
        </ProjectReference>
        <ProjectReference Include="$(MSBuildThisFileDirectory)/../../src/AtomUI.IconPkg/AtomUI.IconPkg.csproj">
            <IncludeAssets>$(IncludeAssets)</IncludeAssets>
        </ProjectReference>
        <ProjectReference Include="$(MSBuildThisFileDirectory)/../../src/AtomUI.IconPkg.AntDesign/AtomUI.IconPkg.AntDesign.csproj">
            <IncludeAssets>$(IncludeAssets)</IncludeAssets>
        </ProjectReference>
        <ProjectReference Include="$(MSBuildThisFileDirectory)/../../src/AtomUI.IconPkg.Generator/AtomUI.IconPkg.Generator.csproj">
            <IncludeAssets>$(IncludeAssets)</IncludeAssets>
        </ProjectReference>
        <ProjectReference Include="$(MSBuildThisFileDirectory)/../../src/AtomUI.Native/AtomUI.Native.csproj">
            <IncludeAssets>$(IncludeAssets)</IncludeAssets>
        </ProjectReference>
        <ProjectReference Include="$(MSBuildThisFileDirectory)/../../src/AtomUI.Theme/AtomUI.Theme.csproj">
            <IncludeAssets>$(IncludeAssets)</IncludeAssets>
        </ProjectReference>
    </ItemGroup>

    <PropertyGroup>
        <AtomUIPackageOutput>$(MSBuildThisFileDirectory)../../output/bin/$(Configuration)/$(TargetFramework)</AtomUIPackageOutput>
        <AtomUIGeneratorPackageOutput>$(MSBuildThisFileDirectory)../../output/bin/$(Configuration)/netstandard2.0</AtomUIGeneratorPackageOutput>
    </PropertyGroup>

    <ItemGroup Condition=" '$(Configuration)' == 'Release' ">
        <Reference Include="$(AtomUIPackageOutput)/AtomUI.Base.dll"/>
        <Reference Include="$(AtomUIPackageOutput)/AtomUI.Controls.dll"/>
        <Reference Include="$(AtomUIPackageOutput)/AtomUI.IconPkg.dll"/>
        <Reference Include="$(AtomUIGeneratorPackageOutput)/AtomUI.Generator.dll"/>
        <Reference Include="$(AtomUIGeneratorPackageOutput)/AtomUI.IconPkg.Generator.dll"/>
        <Reference Include="$(AtomUIPackageOutput)/AtomUI.IconPkg.AntDesign.dll"/>
        <Reference Include="$(AtomUIPackageOutput)/AtomUI.Theme.dll"/>
        <Reference Include="$(AtomUIPackageOutput)/AtomUI.Native.dll"/>
    </ItemGroup>

    <PropertyGroup>
        <AtomUINativeWindowsX64Artifact>$(OutputPathWithoutFramework)/$(AtomUINativeWindowsX64DeployPath)/$(AtomUINativeWindowsArtifactName)</AtomUINativeWindowsX64Artifact>
        <AtomUINativeMacOSArtifact>$(OutputPathWithoutFramework)/$(AtomUINativeMacOSDeployPath)/$(AtomUINativeMacOSArtifactName)</AtomUINativeMacOSArtifact>
    </PropertyGroup>

    <ItemGroup Condition=" '$(Configuration)' == 'Release' ">
        <Content Pack="true" Visible="false" PackagePath="lib/$(TargetFramework)" Include="$(AtomUIPackageOutput)/AtomUI.Base.dll"/>
        <Content Pack="true" Visible="false" PackagePath="lib/$(TargetFramework)" Include="$(AtomUIPackageOutput)/AtomUI.Base.pdb"/>
        <Content Pack="true" Visible="false" PackagePath="lib/$(TargetFramework)" Include="$(AtomUIPackageOutput)/AtomUI.Controls.dll"/>
        <Content Pack="true" Visible="false" PackagePath="lib/$(TargetFramework)" Include="$(AtomUIPackageOutput)/AtomUI.Controls.pdb"/>
        <Content Pack="true" Visible="false" PackagePath="lib/$(TargetFramework)" Include="$(AtomUIPackageOutput)/AtomUI.IconPkg.dll"/>
        <Content Pack="true" Visible="false" PackagePath="lib/$(TargetFramework)" Include="$(AtomUIPackageOutput)/AtomUI.IconPkg.pdb"/>
        <Content Pack="true" Visible="false" PackagePath="lib/$(TargetFramework)" Include="$(AtomUIGeneratorPackageOutput)/AtomUI.Generator.dll"/>
        <Content Pack="true" Visible="false" PackagePath="lib/$(TargetFramework)" Include="$(AtomUIGeneratorPackageOutput)/AtomUI.Generator.pdb"/>
        <Content Pack="true" Visible="false" PackagePath="lib/$(TargetFramework)" Include="$(AtomUIGeneratorPackageOutput)/AtomUI.IconPkg.Generator.dll"/>
        <Content Pack="true" Visible="false" PackagePath="lib/$(TargetFramework)" Include="$(AtomUIGeneratorPackageOutput)/AtomUI.IconPkg.Generator.pdb"/>
        <Content Pack="true" Visible="false" PackagePath="lib/$(TargetFramework)" Include="$(AtomUIPackageOutput)/AtomUI.IconPkg.AntDesign.dll"/>
        <Content Pack="true" Visible="false" PackagePath="lib/$(TargetFramework)" Include="$(AtomUIPackageOutput)/AtomUI.IconPkg.AntDesign.pdb"/>
        <Content Pack="true" Visible="false" PackagePath="lib/$(TargetFramework)" Include="$(AtomUIPackageOutput)/AtomUI.Theme.dll"/>
        <Content Pack="true" Visible="false" PackagePath="lib/$(TargetFramework)" Include="$(AtomUIPackageOutput)/AtomUI.Theme.pdb"/>
        <Content Pack="true" Visible="false" PackagePath="lib/$(TargetFramework)" Include="$(AtomUIPackageOutput)/AtomUI.Native.dll"/>
        <Content Pack="true" Visible="false" PackagePath="lib/$(TargetFramework)" Include="$(AtomUIPackageOutput)/AtomUI.Native.pdb"/>
        
        <Content Include="$(AtomUINativeMacOSArtifact)" 
                 Condition="$([System.IO.File]::Exists('$(AtomUINativeMacOSArtifact)'))">
            <Link>$(AtomUINativeMacOSArtifactName)</Link>
            <PackagePath>$(AtomUINativeMacOSDeployPath)</PackagePath>
            <Pack>true</Pack>
            <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
        </Content>
        <Content Include="$(AtomUINativeWindowsX64Artifact)"
                 Condition="$([System.IO.File]::Exists('$(AtomUINativeWindowsX64Artifact)'))">
            <Link>$(AtomUINativeWindowsArtifactName)</Link>
            <PackagePath>$(AtomUINativeWindowsX64DeployPath)</PackagePath>
            <Pack>true</Pack>
            <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
        </Content>
        
    </ItemGroup>

    <ItemGroup Condition=" '$(Configuration)' == 'Debug' ">
        <Content Include="$(AtomUIGeneratorPackageOutput)/$(AtomUINativeDeployPath)/$(AtomUINativeArtifactName)">
            <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
            <Link>$(AtomUINativeDeployPath)/$(AtomUINativeArtifactName)</Link>
        </Content>
    </ItemGroup>
    
</Project>
